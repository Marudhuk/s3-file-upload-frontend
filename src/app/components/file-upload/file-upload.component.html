<mat-card class="upload-card">
  <mat-card-header>
    <mat-card-title>File Upload</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <div
      class="drop-zone"
      [class.dragging]="isDragging"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
    >
      <input
        #fileInput
        type="file"
        (change)="onFileSelected($event)"
        style="display: none"
      />
      <mat-icon>cloud_upload</mat-icon>
      <p>Drag and drop a file here or</p>
      <button mat-raised-button color="primary" (click)="fileInput.click()">
        Choose File
      </button>
    </div>

    <div *ngIf="selectedFile" class="file-info">
      <mat-icon>insert_drive_file</mat-icon>
      <div class="file-details">
        <p>{{ selectedFile.name }}</p>
        <p class="file-meta">
          {{ formatFileSize(selectedFile.size) }} | {{ selectedFile.type }}
        </p>
      </div>
      <button mat-icon-button color="warn" (click)="resetUpload()">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <!-- <mat-progress-bar
      *ngIf="uploadProgress > 0"
      mode="determinate"
      [value]="uploadProgress"
    ></mat-progress-bar> -->

    <div *ngIf="uploadedImageUrl" class="uploaded-image">
      <ng-container [ngSwitch]="selectedFile?.type">
        <img *ngSwitchCase="'image/jpeg'" [src]="uploadedImageUrl" alt="Uploaded JPEG image">
        <img *ngSwitchCase="'image/png'" [src]="uploadedImageUrl" alt="Uploaded PNG image">
        <iframe *ngSwitchCase="'application/pdf'" [src]="uploadedImageUrl" width="100%" height="500px" type="application/pdf"></iframe>
        <div *ngSwitchDefault>
          <a [href]="uploadedImageUrl" target="_blank">View uploaded file</a>
        </div>
      </ng-container>
    </div>
  </mat-card-content>
  
  <mat-card-actions>
    <button
      mat-raised-button
      color="primary"
      [disabled]="!selectedFile"
      (click)="uploadFile()"
    >
      Upload
    </button>
  </mat-card-actions>
</mat-card> 